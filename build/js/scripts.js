"use strict";!function(){var a=angular.module("coachSeekApp",["ngRoute","coachSeekControllers","coachSeekDirectives"]);a.config(["$routeProvider",function(a){a.when("/",{templateUrl:"partials/business-registration.html",controller:"BusinessRegCtrl"}).when("/business/registration",{templateUrl:"partials/business-registration.html",controller:"BusinessRegCtrl"}).when("/:domain/business/locations",{templateUrl:"partials/business-locations.html",controller:"LocationCtrl"}).when("/:domain/business/coaches",{templateUrl:"partials/business-coaches.html",controller:"CoachCtrl"}).otherwise({redirectTo:"/business"})}])}(),function(){var a=angular.module("coachSeekControllers",[]);a.controller("BusinessRegCtrl",["$scope","$http","$location","$rootScope",function(a,b,c,d){function e(a,b){return-1!==a.indexOf(b,a.length-b.length)}a.businessReg={},a.business={},a.registerBusiness=function(){a.business={},a.error={},b.post("/api/BusinessRegistration",a.businessReg).success(function(a){d.business=a,c.path("/"+a.domain+"/business/locations")}).error(function(b){a.error=b[0],e(b[0].field,"email")&&a.businessRegForm.email.$setValidity("email",!1)})}}]),a.controller("LocationCtrl",["$scope","$filter","$http","$rootScope","$routeParams",function(a,b,c,d){function e(){f()}function f(){return void 0==d.business}function g(a){return void 0===a}function h(a){return a=a||"",""==a?"Location name is required.":j(a)?"Location '"+a+"' already exists.":!0}function i(a,b){return a=a||"",""==a?"Location name is required.":j(a,b)?"Location '"+a+"' already exists.":!0}function j(b,c){c=c||"";for(var d=0;d<a.locations.length;d++)if(a.locations[d].id!=c&&a.locations[d].name.toLowerCase()==b.toLowerCase())return!0;return!1}function k(a,b){var c={};return c.businessId=d.business.id,c.id=b,c.name=a.name,c}a.locations=[],e(),a.checkLocation=function(a,b){return g(b)?h(a):i(a,b)},a.saveLocation=function(a,b){k(a,b)},a.addLocation=function(){a.inserted={name:""},a.locations.push(a.inserted)}}]),a.controller("CoachCtrl",["$scope","$filter","$http","$rootScope","$routeParams",function(a,b,c,d){function e(){f()}function f(){return void 0==d.business}a.coaches=[],e(),a.saveCoach=function(a,b){var c={};c.businessId=d.business.id,c.id=b,c.firstName=a.firstName,c.lastName=a.lastName,c.email=a.email,c.phone=a.phone},a.addCoach=function(){a.inserted={firstName:"",lastName:""},a.coaches.push(a.inserted)}}])}(),function(){var a=angular.module("coachSeekDirectives",[]);a.directive("restrict",function(a){return{restrict:"A",require:"ngModel",link:function(b,c,d){b.$watch(d.ngModel,function(c){c&&a(d.ngModel).assign(b,c.toLowerCase().replace(new RegExp(d.restrict,"g"),"").replace(/\s+/g,""))})}}}),a.directive("focus",function(a){return{scope:{trigger:"@focus"},link:function(b,c){b.$watch("trigger",function(b){"true"===b&&a(function(){c[0].focus()})})}}}),a.directive("goClick",function(a){return function(b,c,d){var e;d.$observe("goClick",function(a){e=a}),c.bind("click",function(){b.$apply(function(){a.path(e)})})}})}();